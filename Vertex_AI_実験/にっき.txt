Vertex AI を使ってモデルトレインの実験をする

Vertex AI ではどうやってモデルをトレーニングしたり
既存のモデルをカスタマイズしたりするのか確かめたい

データセットの形式がよくわからなくて詰んでいる
カスタムトレーニングはトレーニングをある程度自動化してくれるものだが、けっこう難しいということが分かった
AutoMLはなぜかできなかった

チューニングを試す
チューニングはなぜか一生終わらない
終わったけど114$かかった、ぜったいにおかしい

やっぱりカスタムトレーニングを試す
直接vmインスタンスをつかってもよかったけど、llmにおすすめされた通りvertex aiを使うことにした

nvidia/AceMath-7B-Instruct
MATH benchmark のスコアがたかいこのモデルのファインチューニングを試みる

やっぱりよくわからなかったからカスタムトレーニング機能をつかうのはやめた
おそらくすでに訓練プロセスがルーティン化されている場合用の効率化のためのやつなんだと思う

普通にcompute engineでインスタンスを作って色々実験的にやってみる方向に切り替える
cloudサービス自体の勉強も兼ねている

GPUを使うためには割り当て申請を行う必要があるらしい
申請したら何故か一度拒否された

とりあえずL4のインスタンスを作成してgemini cliをいれた
a100を使うためには追加の割り当て申請が必要らしい

インスタンス上で訓練するためのコードをつくってみる　nvidia/AceMath-7B-Instruct
それでどれくらい時間がかかるか、リソースが必要か考えたい

gemini cliが出現回数が一つしかないラベルをデータから除外した笑
一応これは仕様変更なのでちゃんと記録しておく！
L4でやったら51時間かかると表示された！
